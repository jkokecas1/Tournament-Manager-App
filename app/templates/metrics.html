{% extends "base.html" %}

{% block content %}
<h2>{{ _('ğŸ“Š Tournament Metrics') }}</h2>

{% if error %}
<p>{{ error }}</p>
{% else %}

<div class="grid">

    <!-- Top Scorers -->
    <div class="card">
        <h3>{{ _('âš½ Top Scorers') }}</h3>
        <table>
            <tr>
                <th>{{ _('Player') }}</th>
                <th>{{ _('Team') }}</th>
                <th>{{ _('Goals') }}</th>
            </tr>
            {% for player_name, team_name, goals in top_scorers %}
            <tr>
                <td>{{ player_name }}</td>
                <td>{{ team_name }}</td>
                <td><strong>{{ goals }}</strong></td>
            </tr>
            {% endfor %}
        </table>
    </div>

    <!-- Single Match Records -->
    <div class="card">
        <h3>{{ _('ğŸ”¥ Most Goals in a Single Match') }}</h3>
        <ul>
            {% for player, team, day, goals in single_match_record %}
            <li>
                <strong>{{ goals }}</strong> - {{ player }} ({{ team }}) <br>
                <small>{{ _('Matchday') }} {{ day }}</small>
            </li>
            {% endfor %}
        </ul>
    </div>

    <!-- Team Stats: Most Wins -->
    <div class="card">
        <h3>{{ _('ğŸ† Most Wins') }}</h3>
        <ul>
            {% for s in most_wins %}
            <li>
                {% if s.team.logo_data %}
                <img src="{{ url_for('tournaments.team_logo', t_id=t.id, team_id=s.team.id) }}" alt="{{ s.team.name }}"
                    style="width: 20px; height: 20px; object-fit: contain; vertical-align: middle; margin-left: 5px;"
                    title="{{ s.team.name }}">
                {% endif %}
            </li>
            {% endfor %}
        </ul>
    </div>

    <!-- Team Stats: Best Attack -->
    <div class="card">
        <h3>{{ _('ğŸ¯ Best Attack (Goals For)') }}</h3>
        <ul>
            {% for s in best_attack %}
            <li>
                <strong>{{ s.gf }}</strong> - {{ s.team.name }}
            </li>
            {% endfor %}
        </ul>
    </div>

    <!-- Team Stats: Most Conceded (Most Goleado) -->
    <div class="card">
        <h3>{{ _('ğŸ¥… Most Conceded (Goals Against)') }}</h3>
        <ul>
            {% for s in most_conceded %}
            <li>
                <strong>{{ s.ga }}</strong> - {{ s.team.name }}
            </li>
            {% endfor %}
        </ul>
    </div>

    <!-- Fair Play -->
    <div class="card">
        <h3>{{ _('ğŸ˜‡ Fair Play (Fewest Cards)') }}</h3>
        <ul>
            {% for team_name, cards in team_cards %}
            <li>
                <strong>{{ cards }}</strong> - {{ team_name }}
            </li>
            {% endfor %}
        </ul>
    </div>

</div>

{% endif %}
{% endblock %}