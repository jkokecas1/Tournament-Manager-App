{% extends "sidebar_layout.html" %}

{% block layout_content %}
<h2 style="margin-top: 0;">{{ _('ğŸ‘‘ Dashboard de AdministraciÃ³n') }}</h2>

<!-- System Overview Stats -->
<div class="grid" style="margin-bottom: 35px;">
    <div class="card" style="text-align: center; border-bottom: 4px solid #3498db; background: #fdfdfd;">
        <h3 style="margin: 0; font-size: 2.2em; color: #2c3e50;">{{ stats.tournament_count }}</h3>
        <p style="margin: 5px 0 0; color: #7f8c8d; font-weight: 600;">{{ _('Torneos') }}</p>
    </div>
    <div class="card" style="text-align: center; border-bottom: 4px solid #2ecc71; background: #fdfdfd;">
        <h3 style="margin: 0; font-size: 2.2em; color: #2c3e50;">{{ stats.team_count }}</h3>
        <p style="margin: 5px 0 0; color: #7f8c8d; font-weight: 600;">{{ _('Equipos') }}</p>
    </div>
    <div class="card" style="text-align: center; border-bottom: 4px solid #e67e22; background: #fdfdfd;">
        <h3 style="margin: 0; font-size: 2.2em; color: #2c3e50;">{{ stats.match_count }}</h3>
        <p style="margin: 5px 0 0; color: #7f8c8d; font-weight: 600;">{{ _('Partidos') }}</p>
    </div>
    <div class="card" style="text-align: center; border-bottom: 4px solid #9b59b6; background: #fdfdfd;">
        <h3 style="margin: 0; font-size: 2.2em; color: #2c3e50;">{{ stats.user_count }}</h3>
        <p style="margin: 5px 0 0; color: #7f8c8d; font-weight: 600;">{{ _('Usuarios') }}</p>
    </div>
</div>

<div class="card" id="configuraciones" style="border: 1px solid #e1e8ed; padding: 25px;">
    <h3 style="margin-top: 0; border-bottom: 2px solid #f1f3f5; padding-bottom: 10px; margin-bottom: 20px;">
        âš™ï¸ {{ _('ConfiguraciÃ³n del Sitio') }}
    </h3>
    <form action="{{ url_for('admin.update_settings') }}" method="post" enctype="multipart/form-data">
        <div class="grid" style="grid-template-columns: 1fr 1fr; gap: 30px;">
            <div>
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">{{ _('Nombre de la Empresa')
                        }}</label>
                    <input type="text" name="company_name" value="{{ site_config.company_name if site_config else '' }}"
                        placeholder="Nombre de la liga o empresa" style="width: 100%;">
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">{{ _('Logo de la Empresa')
                        }}</label>
                    {% if site_config and site_config.company_logo_data %}
                    <div
                        style="margin: 10px 0; background: #f8f9fa; padding: 15px; border-radius: 8px; display: inline-block;">
                        <img src="{{ url_for('admin.company_logo') }}" alt="Current Logo" style="height: 60px;">
                    </div>
                    {% endif %}
                    <input type="file" name="company_logo" accept="image/*" style="display: block; margin-top: 10px;">
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">{{ _('Idioma Predeterminado')
                        }}</label>
                    <select name="default_language" style="width: 100%;">
                        <option value="en" {% if site_config and site_config.default_language=='en' %}selected{% endif
                            %}>
                            English ğŸ‡¬ğŸ‡§</option>
                        <option value="es" {% if site_config and site_config.default_language=='es' %}selected{% endif
                            %}>
                            EspaÃ±ol ğŸ‡ªğŸ‡¸</option>
                    </select>
                </div>
            </div>

            <div>
                <h4
                    style="margin-top: 0; font-size: 0.9em; color: #7f8c8d; text-transform: uppercase; letter-spacing: 1px;">
                    {{ _('Redes Sociales') }}
                </h4>
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; font-size: 0.9em;">Facebook URL</label>
                    <input type="text" name="social_facebook"
                        value="{{ site_config.social_facebook if site_config else '' }}"
                        placeholder="https://facebook.com/league" style="width: 100%;">
                </div>
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; font-size: 0.9em;">Twitter (X) URL</label>
                    <input type="text" name="social_twitter"
                        value="{{ site_config.social_twitter if site_config else '' }}"
                        placeholder="https://twitter.com/league" style="width: 100%;">
                </div>
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; font-size: 0.9em;">Instagram URL</label>
                    <input type="text" name="social_instagram"
                        value="{{ site_config.social_instagram if site_config else '' }}"
                        placeholder="https://instagram.com/league" style="width: 100%;">
                </div>
            </div>
        </div>

        <div style="margin-top: 20px; text-align: right; border-top: 1px solid #f1f3f5; padding-top: 20px;">
            <button type="submit" class="btn" style="padding: 12px 30px; font-weight: 600;">{{ _('Guardar Cambios')
                }}</button>
        </div>
    </form>
</div>
{% endblock %}